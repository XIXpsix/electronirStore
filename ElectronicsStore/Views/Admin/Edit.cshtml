@model ElectronicsStore.Domain.ViewModels.ProductViewModel

@{
    ViewData["Title"] = "Редактирование товара: " + Model.Name;
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm border-0 bg-dark-card">
                <div class="card-header bg-main-orange text-white">
                    <h4 class="mb-0">@ViewData["Title"]</h4>
                </div>
                <partial name="_ProductFormPartial" model="Model" />
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('.delete-image-btn').click(function () {
                var imageId = $(this).data('image-id');
                var $imageContainer = $('#image_' + imageId);
                var productName = '@Model.Name';

                if (confirm('Вы уверены, что хотите удалить это изображение для товара ' + productName + '?')) {
                    $.ajax({
                        url: '@Url.Action("DeleteImage", "Admin")',
                        type: 'POST',
                        data: { imageId: imageId },
                        success: function (response) {
                            if (response.success) {
                                $imageContainer.remove();
                                alert(response.message);
                            } else {
                                alert('Ошибка: ' + response.message);
                            }
                        },
                        error: function (xhr, status, error) {
                            alert('Произошла ошибка при удалении изображения.');
                        }
                    });
                }
            });
        });
    </script>
}